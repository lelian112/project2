<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.gamja_farm.mapper.UserMapper">
 
    <!-- 회원가입 -->
    <insert id="insertUser" parameterType="UserDTO">
        <![CDATA[
			INSERT INTO user (id, pw, name, nick_name, email, birth, gender, pic, country_code, phone, mbti, caption, grade)
			VALUES (#{id}, #{pw}, #{name}, #{nick_name}, #{email}, #{birth}, #{gender}, #{pic}, #{country_code}, #{phone}, #{mbti}, #{caption}, #{grade});
        ]]>
    </insert>
    
	<insert id="insertUserVisit" parameterType="UserDTO">
		<![CDATA[
			INSERT INTO user_visit (user_id)
			VALUES (#{id})
		]]>
    </insert>
	
    <!--회원정보 가져오기 -->
    <select id="selectUser" parameterType="string" resultType="UserDTO">
        SELECT * FROM user
        WHERE id = #{id}
    </select>
    
    <!-- 회원 정보 수정 -->
    <update id="updateUser" parameterType="UserDTO">
        UPDATE user
        SET pw=#{pw}, name=#{name}, phone=#{phone}
        WHERE id=#{id}   
    </update>
    
    <!-- 비밀번호 변경 -->
    <update id="updateUserPass" parameterType="UserDTO">
        UPDATE user SET pw=#{pw}
        WHERE id = #{id}
    </update>
    
    <!--회원탈퇴 -->
    <delete id="deleteUser" parameterType="java.lang.String">
		DELETE FROM user
		WHERE id=#{id}
	</delete>

 </mapper>   
 